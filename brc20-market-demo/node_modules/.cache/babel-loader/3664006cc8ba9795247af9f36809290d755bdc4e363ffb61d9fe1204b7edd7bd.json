{"ast":null,"code":"import { __read } from \"tslib\";\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var storage;\n    var _a = options.onError,\n      onError = _a === void 0 ? function (e) {\n        console.error(e);\n      } : _a;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      onError(err);\n    }\n    var serializer = function (value) {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    var deserializer = function (value) {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        var raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        onError(e);\n      }\n      if (isFunction(options.defaultValue)) {\n        return options.defaultValue();\n      }\n      return options.defaultValue;\n    }\n    var _b = __read(useState(getStoredValue), 2),\n      state = _b[0],\n      setState = _b[1];\n    useUpdateEffect(function () {\n      setState(getStoredValue());\n    }, [key]);\n    var updateState = function (value) {\n      var currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}","map":{"version":3,"names":["__read","useState","useMemoizedFn","useUpdateEffect","isFunction","isUndef","createUseStorageState","getStorage","useStorageState","key","options","storage","_a","onError","e","console","error","err","serializer","value","JSON","stringify","deserializer","parse","getStoredValue","raw","getItem","defaultValue","_b","state","setState","updateState","currentState","removeItem","setItem"],"sources":["C:/unisat-dev-support/brc20-market-demo/node_modules/ahooks/es/createUseStorageState/index.js"],"sourcesContent":["import { __read } from \"tslib\";\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var storage;\n    var _a = options.onError,\n      onError = _a === void 0 ? function (e) {\n        console.error(e);\n      } : _a;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      onError(err);\n    }\n    var serializer = function (value) {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    var deserializer = function (value) {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        var raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        onError(e);\n      }\n      if (isFunction(options.defaultValue)) {\n        return options.defaultValue();\n      }\n      return options.defaultValue;\n    }\n    var _b = __read(useState(getStoredValue), 2),\n      state = _b[0],\n      setState = _b[1];\n    useUpdateEffect(function () {\n      setState(getStoredValue());\n    }, [key]);\n    var updateState = function (value) {\n      var currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}