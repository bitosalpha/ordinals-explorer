{"ast":null,"code":"import { __assign, __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { useMemo, useState } from 'react';\nimport useEventListener from '../useEventListener';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { getTargetElement } from '../utils/domTarget';\nimport { getClientHeight, getScrollHeight, getScrollTop } from '../utils/rect';\nvar useInfiniteScroll = function (service, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var target = options.target,\n    isNoMore = options.isNoMore,\n    _a = options.threshold,\n    threshold = _a === void 0 ? 100 : _a,\n    _b = options.reloadDeps,\n    reloadDeps = _b === void 0 ? [] : _b,\n    manual = options.manual,\n    onBefore = options.onBefore,\n    onSuccess = options.onSuccess,\n    onError = options.onError,\n    onFinally = options.onFinally;\n  var _c = __read(useState(), 2),\n    finalData = _c[0],\n    setFinalData = _c[1];\n  var _d = __read(useState(false), 2),\n    loadingMore = _d[0],\n    setLoadingMore = _d[1];\n  var noMore = useMemo(function () {\n    if (!isNoMore) return false;\n    return isNoMore(finalData);\n  }, [finalData]);\n  var _e = useRequest(function (lastData) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var currentData;\n        var _a, _b;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              return [4 /*yield*/, service(lastData)];\n            case 1:\n              currentData = _c.sent();\n              if (!lastData) {\n                setFinalData(__assign(__assign({}, currentData), {\n                  list: __spreadArray([], __read((_a = currentData.list) !== null && _a !== void 0 ? _a : []), false)\n                }));\n              } else {\n                setFinalData(__assign(__assign({}, currentData), {\n                  list: __spreadArray(__spreadArray([], __read((_b = lastData.list) !== null && _b !== void 0 ? _b : []), false), __read(currentData.list), false)\n                }));\n              }\n              return [2 /*return*/, currentData];\n          }\n        });\n      });\n    }, {\n      manual: manual,\n      onFinally: function (_, d, e) {\n        setLoadingMore(false);\n        onFinally === null || onFinally === void 0 ? void 0 : onFinally(d, e);\n      },\n      onBefore: function () {\n        return onBefore === null || onBefore === void 0 ? void 0 : onBefore();\n      },\n      onSuccess: function (d) {\n        setTimeout(function () {\n          // eslint-disable-next-line @typescript-eslint/no-use-before-define\n          scrollMethod();\n        });\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(d);\n      },\n      onError: function (e) {\n        return onError === null || onError === void 0 ? void 0 : onError(e);\n      }\n    }),\n    loading = _e.loading,\n    error = _e.error,\n    run = _e.run,\n    runAsync = _e.runAsync,\n    cancel = _e.cancel;\n  var loadMore = useMemoizedFn(function () {\n    if (noMore) return;\n    setLoadingMore(true);\n    run(finalData);\n  });\n  var loadMoreAsync = useMemoizedFn(function () {\n    if (noMore) return Promise.reject();\n    setLoadingMore(true);\n    return runAsync(finalData);\n  });\n  var reload = function () {\n    setLoadingMore(false);\n    return run();\n  };\n  var reloadAsync = function () {\n    setLoadingMore(false);\n    return runAsync();\n  };\n  var scrollMethod = function () {\n    var el = getTargetElement(target);\n    if (!el) {\n      return;\n    }\n    el = el === document ? document.documentElement : el;\n    var scrollTop = getScrollTop(el);\n    var scrollHeight = getScrollHeight(el);\n    var clientHeight = getClientHeight(el);\n    if (scrollHeight - scrollTop <= clientHeight + threshold) {\n      loadMore();\n    }\n  };\n  useEventListener('scroll', function () {\n    if (loading || loadingMore) {\n      return;\n    }\n    scrollMethod();\n  }, {\n    target: target\n  });\n  useUpdateEffect(function () {\n    run();\n  }, __spreadArray([], __read(reloadDeps), false));\n  return {\n    data: finalData,\n    loading: !loadingMore && loading,\n    error: error,\n    loadingMore: loadingMore,\n    noMore: noMore,\n    loadMore: loadMore,\n    loadMoreAsync: loadMoreAsync,\n    reload: useMemoizedFn(reload),\n    reloadAsync: useMemoizedFn(reloadAsync),\n    mutate: setFinalData,\n    cancel: cancel\n  };\n};\nexport default useInfiniteScroll;","map":{"version":3,"names":["__assign","__awaiter","__generator","__read","__spreadArray","useMemo","useState","useEventListener","useMemoizedFn","useRequest","useUpdateEffect","getTargetElement","getClientHeight","getScrollHeight","getScrollTop","useInfiniteScroll","service","options","target","isNoMore","_a","threshold","_b","reloadDeps","manual","onBefore","onSuccess","onError","onFinally","_c","finalData","setFinalData","_d","loadingMore","setLoadingMore","noMore","_e","lastData","currentData","label","sent","list","_","d","e","setTimeout","scrollMethod","loading","error","run","runAsync","cancel","loadMore","loadMoreAsync","Promise","reject","reload","reloadAsync","el","document","documentElement","scrollTop","scrollHeight","clientHeight","data","mutate"],"sources":["C:/unisat-dev-support/brc20-market-demo/node_modules/ahooks/es/useInfiniteScroll/index.js"],"sourcesContent":["import { __assign, __awaiter, __generator, __read, __spreadArray } from \"tslib\";\nimport { useMemo, useState } from 'react';\nimport useEventListener from '../useEventListener';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { getTargetElement } from '../utils/domTarget';\nimport { getClientHeight, getScrollHeight, getScrollTop } from '../utils/rect';\nvar useInfiniteScroll = function (service, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var target = options.target,\n    isNoMore = options.isNoMore,\n    _a = options.threshold,\n    threshold = _a === void 0 ? 100 : _a,\n    _b = options.reloadDeps,\n    reloadDeps = _b === void 0 ? [] : _b,\n    manual = options.manual,\n    onBefore = options.onBefore,\n    onSuccess = options.onSuccess,\n    onError = options.onError,\n    onFinally = options.onFinally;\n  var _c = __read(useState(), 2),\n    finalData = _c[0],\n    setFinalData = _c[1];\n  var _d = __read(useState(false), 2),\n    loadingMore = _d[0],\n    setLoadingMore = _d[1];\n  var noMore = useMemo(function () {\n    if (!isNoMore) return false;\n    return isNoMore(finalData);\n  }, [finalData]);\n  var _e = useRequest(function (lastData) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var currentData;\n        var _a, _b;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              return [4 /*yield*/, service(lastData)];\n            case 1:\n              currentData = _c.sent();\n              if (!lastData) {\n                setFinalData(__assign(__assign({}, currentData), {\n                  list: __spreadArray([], __read((_a = currentData.list) !== null && _a !== void 0 ? _a : []), false)\n                }));\n              } else {\n                setFinalData(__assign(__assign({}, currentData), {\n                  list: __spreadArray(__spreadArray([], __read((_b = lastData.list) !== null && _b !== void 0 ? _b : []), false), __read(currentData.list), false)\n                }));\n              }\n              return [2 /*return*/, currentData];\n          }\n        });\n      });\n    }, {\n      manual: manual,\n      onFinally: function (_, d, e) {\n        setLoadingMore(false);\n        onFinally === null || onFinally === void 0 ? void 0 : onFinally(d, e);\n      },\n      onBefore: function () {\n        return onBefore === null || onBefore === void 0 ? void 0 : onBefore();\n      },\n      onSuccess: function (d) {\n        setTimeout(function () {\n          // eslint-disable-next-line @typescript-eslint/no-use-before-define\n          scrollMethod();\n        });\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(d);\n      },\n      onError: function (e) {\n        return onError === null || onError === void 0 ? void 0 : onError(e);\n      }\n    }),\n    loading = _e.loading,\n    error = _e.error,\n    run = _e.run,\n    runAsync = _e.runAsync,\n    cancel = _e.cancel;\n  var loadMore = useMemoizedFn(function () {\n    if (noMore) return;\n    setLoadingMore(true);\n    run(finalData);\n  });\n  var loadMoreAsync = useMemoizedFn(function () {\n    if (noMore) return Promise.reject();\n    setLoadingMore(true);\n    return runAsync(finalData);\n  });\n  var reload = function () {\n    setLoadingMore(false);\n    return run();\n  };\n  var reloadAsync = function () {\n    setLoadingMore(false);\n    return runAsync();\n  };\n  var scrollMethod = function () {\n    var el = getTargetElement(target);\n    if (!el) {\n      return;\n    }\n    el = el === document ? document.documentElement : el;\n    var scrollTop = getScrollTop(el);\n    var scrollHeight = getScrollHeight(el);\n    var clientHeight = getClientHeight(el);\n    if (scrollHeight - scrollTop <= clientHeight + threshold) {\n      loadMore();\n    }\n  };\n  useEventListener('scroll', function () {\n    if (loading || loadingMore) {\n      return;\n    }\n    scrollMethod();\n  }, {\n    target: target\n  });\n  useUpdateEffect(function () {\n    run();\n  }, __spreadArray([], __read(reloadDeps), false));\n  return {\n    data: finalData,\n    loading: !loadingMore && loading,\n    error: error,\n    loadingMore: loadingMore,\n    noMore: noMore,\n    loadMore: loadMore,\n    loadMoreAsync: loadMoreAsync,\n    reload: useMemoizedFn(reload),\n    reloadAsync: useMemoizedFn(reloadAsync),\n    mutate: setFinalData,\n    cancel: cancel\n  };\n};\nexport default useInfiniteScroll;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}