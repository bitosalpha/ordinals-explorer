{"ast":null,"code":"var _jsxFileName = \"C:\\\\ordinals-explorer\\\\brc20-market-demo\\\\src\\\\page\\\\Listed.tsx\",\n  _s = $RefreshSig$();\nimport { useMarket } from \"../provider/MarketProvider\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { InscriptionType, marketApi } from \"../utils/marketApi\";\nimport { handleError, isTicketValid } from \"../utils/utils\";\nimport { Button, Flex, Pagination, Skeleton, Space, Statistic } from \"antd\";\nimport { BuyConfirmAlert } from \"../components/BuyConfirmAlert\";\nimport { useNetwork } from \"../provider/NetworkProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst pageSize = 10;\nexport function Listed() {\n  _s();\n  const {\n    network\n  } = useNetwork();\n  const {\n    tick\n  } = useMarket();\n  const [total, setTotal] = useState(0); // total listed\n  const [page, setPage] = useState(1);\n  const [list, setList] = useState();\n  const [buyItem, setBuyItem] = useState();\n  const refreshData = useCallback(() => {\n    if (tick && isTicketValid(tick)) {\n      // get listed\n      setList(undefined);\n      marketApi.listBrc20({\n        filter: {\n          tick,\n          nftType: InscriptionType.brc20,\n          isEnd: false // only show listed\n        },\n        sort: {\n          unitPrice: 1\n        },\n        start: (page - 1) * pageSize,\n        limit: pageSize\n      }).then(res => {\n        setTotal(res.total);\n        setList(res.list);\n      }).catch(handleError);\n    } else {\n      setList([]);\n    }\n  }, [page, tick]);\n  useEffect(() => {\n    refreshData();\n  }, [refreshData, network]);\n  if (!list) return /*#__PURE__*/_jsxDEV(Skeleton, {\n    active: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Space, {\n      wrap: true,\n      children: list.map(item => {\n        return /*#__PURE__*/_jsxDEV(Flex, {\n          vertical: true,\n          gap: 8,\n          style: {\n            border: '1px solid #eee',\n            padding: 8,\n            borderRadius: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(Statistic, {\n            value: item.amount,\n            title: item.tick,\n            valueStyle: {\n              fontSize: 14\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Statistic, {\n            title: 'unit price',\n            value: item.unitPrice,\n            valueStyle: {\n              fontSize: 14\n            },\n            suffix: `sats/${item.tick}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Statistic, {\n            value: item.price,\n            valueStyle: {\n              fontSize: 18\n            },\n            suffix: 'sats'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setBuyItem(item),\n            children: \"Buy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 21\n          }, this)]\n        }, item.auctionId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 24\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      style: {\n        textAlign: 'center',\n        marginTop: 16\n      },\n      pageSize: pageSize,\n      current: page,\n      total: total,\n      onChange: page => {\n        setPage(page);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), buyItem && /*#__PURE__*/_jsxDEV(BuyConfirmAlert, {\n      item: buyItem,\n      close: () => {\n        setBuyItem(undefined);\n      },\n      onComplete: refreshData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true);\n}\n_s(Listed, \"Fauf1nlzS1HWnQiZDZDN0UIKWCY=\", false, function () {\n  return [useNetwork, useMarket];\n});\n_c = Listed;\nvar _c;\n$RefreshReg$(_c, \"Listed\");","map":{"version":3,"names":["useMarket","useCallback","useEffect","useState","InscriptionType","marketApi","handleError","isTicketValid","Button","Flex","Pagination","Skeleton","Space","Statistic","BuyConfirmAlert","useNetwork","jsxDEV","_jsxDEV","Fragment","_Fragment","pageSize","Listed","_s","network","tick","total","setTotal","page","setPage","list","setList","buyItem","setBuyItem","refreshData","undefined","listBrc20","filter","nftType","brc20","isEnd","sort","unitPrice","start","limit","then","res","catch","active","fileName","_jsxFileName","lineNumber","columnNumber","children","wrap","map","item","vertical","gap","style","border","padding","borderRadius","value","amount","title","valueStyle","fontSize","suffix","price","onClick","auctionId","textAlign","marginTop","current","onChange","close","onComplete","_c","$RefreshReg$"],"sources":["C:/ordinals-explorer/brc20-market-demo/src/page/Listed.tsx"],"sourcesContent":["import {useMarket} from \"../provider/MarketProvider\";\r\nimport {useCallback, useEffect, useState} from \"react\";\r\nimport {BRC20ListItem, InscriptionType, marketApi} from \"../utils/marketApi\";\r\nimport {handleError, isTicketValid} from \"../utils/utils\";\r\nimport {Button, Flex, Pagination, Skeleton, Space, Statistic} from \"antd\";\r\nimport {BuyConfirmAlert} from \"../components/BuyConfirmAlert\";\r\nimport {useNetwork} from \"../provider/NetworkProvider\";\r\n\r\nconst pageSize = 10;\r\n\r\nexport function Listed() {\r\n\r\n    const {network} = useNetwork();\r\n    const {tick,} = useMarket();\r\n\r\n    const [total, setTotal] = useState(0); // total listed\r\n    const [page, setPage] = useState(1);\r\n    const [list, setList] = useState<BRC20ListItem[] | undefined>();\r\n\r\n    const [buyItem, setBuyItem] = useState<BRC20ListItem | undefined>();\r\n\r\n    const refreshData = useCallback(() => {\r\n        if (tick && isTicketValid(tick)) {\r\n            // get listed\r\n            setList(undefined)\r\n            marketApi.listBrc20({\r\n                filter: {\r\n                    tick,\r\n                    nftType: InscriptionType.brc20,\r\n                    isEnd: false    // only show listed\r\n                },\r\n                sort: {unitPrice: 1},\r\n                start: (page - 1) * pageSize,\r\n                limit: pageSize\r\n            }).then(res => {\r\n                setTotal(res.total)\r\n                setList(res.list)\r\n            }).catch(handleError)\r\n        } else {\r\n            setList([])\r\n        }\r\n    }, [page, tick]);\r\n\r\n    useEffect(() => {\r\n        refreshData()\r\n    }, [refreshData, network]);\r\n\r\n\r\n    if (!list) return <Skeleton active/>\r\n\r\n    return <>\r\n        <Space wrap={true}>\r\n            {list.map(item => {\r\n                return <Flex\r\n                    vertical\r\n                    gap={8}\r\n                    key={item.auctionId} style={{\r\n                    border: '1px solid #eee',\r\n                    padding: 8,\r\n                    borderRadius: 8,\r\n                }}>\r\n                    <Statistic\r\n                        value={item.amount}\r\n                        title={item.tick}\r\n                        valueStyle={{fontSize: 14}}\r\n                    />\r\n                    <Statistic\r\n                        title={'unit price'}\r\n                        value={item.unitPrice}\r\n                        valueStyle={{fontSize: 14}}\r\n                        suffix={`sats/${item.tick}`}\r\n                    />\r\n                    <Statistic\r\n                        value={item.price}\r\n                        valueStyle={{fontSize: 18}}\r\n                        suffix={'sats'}\r\n                    />\r\n                    <Button onClick={() => setBuyItem(item)}>Buy</Button>\r\n                </Flex>\r\n            })}\r\n        </Space>\r\n        <Pagination\r\n            style={{textAlign: 'center', marginTop: 16}}\r\n            pageSize={pageSize}\r\n            current={page}\r\n            total={total}\r\n            onChange={page => {\r\n                setPage(page)\r\n            }}\r\n        />\r\n        {\r\n            buyItem && <BuyConfirmAlert\r\n                item={buyItem}\r\n                close={() => {\r\n                    setBuyItem(undefined)\r\n                }}\r\n                onComplete={refreshData}\r\n            />\r\n        }\r\n    </>\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}