{"ast":null,"code":"import { __assign, __read, __rest, __spreadArray } from \"tslib\";\nimport useCreation from '../../useCreation';\nimport useLatest from '../../useLatest';\nimport useMemoizedFn from '../../useMemoizedFn';\nimport useMount from '../../useMount';\nimport useUnmount from '../../useUnmount';\nimport useUpdate from '../../useUpdate';\nimport isDev from '../../utils/isDev';\nimport Fetch from './Fetch';\nfunction useRequestImplement(service, options, plugins) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (plugins === void 0) {\n    plugins = [];\n  }\n  var _a = options.manual,\n    manual = _a === void 0 ? false : _a,\n    rest = __rest(options, [\"manual\"]);\n  if (isDev) {\n    if (options.defaultParams && !Array.isArray(options.defaultParams)) {\n      console.warn(\"expected defaultParams is array, got \".concat(typeof options.defaultParams));\n    }\n  }\n  var fetchOptions = __assign({\n    manual: manual\n  }, rest);\n  var serviceRef = useLatest(service);\n  var update = useUpdate();\n  var fetchInstance = useCreation(function () {\n    var initState = plugins.map(function (p) {\n      var _a;\n      return (_a = p === null || p === void 0 ? void 0 : p.onInit) === null || _a === void 0 ? void 0 : _a.call(p, fetchOptions);\n    }).filter(Boolean);\n    return new Fetch(serviceRef, fetchOptions, update, Object.assign.apply(Object, __spreadArray([{}], __read(initState), false)));\n  }, []);\n  fetchInstance.options = fetchOptions;\n  // run all plugins hooks\n  fetchInstance.pluginImpls = plugins.map(function (p) {\n    return p(fetchInstance, fetchOptions);\n  });\n  useMount(function () {\n    if (!manual) {\n      // useCachePlugin can set fetchInstance.state.params from cache when init\n      var params = fetchInstance.state.params || options.defaultParams || [];\n      // @ts-ignore\n      fetchInstance.run.apply(fetchInstance, __spreadArray([], __read(params), false));\n    }\n  });\n  useUnmount(function () {\n    fetchInstance.cancel();\n  });\n  return {\n    loading: fetchInstance.state.loading,\n    data: fetchInstance.state.data,\n    error: fetchInstance.state.error,\n    params: fetchInstance.state.params || [],\n    cancel: useMemoizedFn(fetchInstance.cancel.bind(fetchInstance)),\n    refresh: useMemoizedFn(fetchInstance.refresh.bind(fetchInstance)),\n    refreshAsync: useMemoizedFn(fetchInstance.refreshAsync.bind(fetchInstance)),\n    run: useMemoizedFn(fetchInstance.run.bind(fetchInstance)),\n    runAsync: useMemoizedFn(fetchInstance.runAsync.bind(fetchInstance)),\n    mutate: useMemoizedFn(fetchInstance.mutate.bind(fetchInstance))\n  };\n}\nexport default useRequestImplement;","map":{"version":3,"names":["__assign","__read","__rest","__spreadArray","useCreation","useLatest","useMemoizedFn","useMount","useUnmount","useUpdate","isDev","Fetch","useRequestImplement","service","options","plugins","_a","manual","rest","defaultParams","Array","isArray","console","warn","concat","fetchOptions","serviceRef","update","fetchInstance","initState","map","p","onInit","call","filter","Boolean","Object","assign","apply","pluginImpls","params","state","run","cancel","loading","data","error","bind","refresh","refreshAsync","runAsync","mutate"],"sources":["C:/unisat-dev-support/brc20-market-demo/node_modules/ahooks/es/useRequest/src/useRequestImplement.js"],"sourcesContent":["import { __assign, __read, __rest, __spreadArray } from \"tslib\";\nimport useCreation from '../../useCreation';\nimport useLatest from '../../useLatest';\nimport useMemoizedFn from '../../useMemoizedFn';\nimport useMount from '../../useMount';\nimport useUnmount from '../../useUnmount';\nimport useUpdate from '../../useUpdate';\nimport isDev from '../../utils/isDev';\nimport Fetch from './Fetch';\nfunction useRequestImplement(service, options, plugins) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (plugins === void 0) {\n    plugins = [];\n  }\n  var _a = options.manual,\n    manual = _a === void 0 ? false : _a,\n    rest = __rest(options, [\"manual\"]);\n  if (isDev) {\n    if (options.defaultParams && !Array.isArray(options.defaultParams)) {\n      console.warn(\"expected defaultParams is array, got \".concat(typeof options.defaultParams));\n    }\n  }\n  var fetchOptions = __assign({\n    manual: manual\n  }, rest);\n  var serviceRef = useLatest(service);\n  var update = useUpdate();\n  var fetchInstance = useCreation(function () {\n    var initState = plugins.map(function (p) {\n      var _a;\n      return (_a = p === null || p === void 0 ? void 0 : p.onInit) === null || _a === void 0 ? void 0 : _a.call(p, fetchOptions);\n    }).filter(Boolean);\n    return new Fetch(serviceRef, fetchOptions, update, Object.assign.apply(Object, __spreadArray([{}], __read(initState), false)));\n  }, []);\n  fetchInstance.options = fetchOptions;\n  // run all plugins hooks\n  fetchInstance.pluginImpls = plugins.map(function (p) {\n    return p(fetchInstance, fetchOptions);\n  });\n  useMount(function () {\n    if (!manual) {\n      // useCachePlugin can set fetchInstance.state.params from cache when init\n      var params = fetchInstance.state.params || options.defaultParams || [];\n      // @ts-ignore\n      fetchInstance.run.apply(fetchInstance, __spreadArray([], __read(params), false));\n    }\n  });\n  useUnmount(function () {\n    fetchInstance.cancel();\n  });\n  return {\n    loading: fetchInstance.state.loading,\n    data: fetchInstance.state.data,\n    error: fetchInstance.state.error,\n    params: fetchInstance.state.params || [],\n    cancel: useMemoizedFn(fetchInstance.cancel.bind(fetchInstance)),\n    refresh: useMemoizedFn(fetchInstance.refresh.bind(fetchInstance)),\n    refreshAsync: useMemoizedFn(fetchInstance.refreshAsync.bind(fetchInstance)),\n    run: useMemoizedFn(fetchInstance.run.bind(fetchInstance)),\n    runAsync: useMemoizedFn(fetchInstance.runAsync.bind(fetchInstance)),\n    mutate: useMemoizedFn(fetchInstance.mutate.bind(fetchInstance))\n  };\n}\nexport default useRequestImplement;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}